Contexto
--------
Temos um modelo de lote com DUAS colunas relacionadas ao estado:

- `status`: 'future' | 'active' | 'closed'
- `ativo`: boolean

Hoje o comportamento est√° errado e inconsistente:

1. Ao ativar um lote pelo admin:
   - S√≥ est√° mudando `ativo = true`
   - Mas N√ÉO est√° atualizando `status = 'active'`
   - Isso quebra toda a l√≥gica que depende de `status`.

2. Ao ativar um lote:
   - N√£o estamos garantindo que:
     - apenas um lote por evento fique com `status = 'active'`
     - outros lotes ativos do mesmo evento sejam fechados (`status = 'closed'`).

3. O campo `status = 'future'` √© usado para virada autom√°tica de lote quando outro √© fechado.
   - Por√©m o admin n√£o tem controle claro disso na tela.

Al√©m disso, decidimos uma regra nova e importante:

üö® A PARTIR DE AGORA:
- A coluna `ativo` ser√° usada **APENAS PARA VISIBILIDADE NA √ÅREA DO CLIENTE**.
- Regras de neg√≥cio (qual lote √© usado na inscri√ß√£o, qual √© o lote atual, etc.) ser√£o definidas **EXCLUSIVAMENTE** pelo campo `status`.
- No futuro, quando listarmos todos os lotes do evento para o atleta:
  - apenas os lotes com `ativo = true` aparecer√£o para o atleta,
  - lotes com `ativo = false` continuar√£o existindo no banco, mas N√ÉO ser√£o exibidos na interface do atleta.


1) Defini√ß√£o clara de sem√¢ntica: `status` x `ativo`
---------------------------------------------------

Quero que voc√™ ajuste o c√≥digo e a l√≥gica conforme:

- `status` (fonte de verdade de neg√≥cio):
  - 'future'  ‚Üí lote futuro, ainda n√£o ativo, usado para ativa√ß√£o autom√°tica quando o lote atual fecha ou expira.
  - 'active'  ‚Üí lote atual, v√°lido para o fluxo de inscri√ß√£o.
  - 'closed'  ‚Üí lote encerrado (por capacidade, expira√ß√£o ou decis√£o administrativa), n√£o aceita mais inscri√ß√µes.

- `ativo` (VISIBILIDADE na √°rea do cliente):
  - boolean, usado apenas para controlar se o lote ser√° exibido nas telas do atleta/cliente.
  - Se `ativo = false`, o lote:
    - ainda pode existir para hist√≥rico ou controle interno,
    - ainda pode ter `status = 'closed'`, 'future' ou at√© 'active' (se fizermos um caso especial),
    - mas **n√£o deve aparecer na listagem de lotes para o atleta** quando for implementado esse recurso.
  - `ativo` N√ÉO pode ser usado para:
    - decidir se um lote est√° apto a receber inscri√ß√µes,
    - escolher o lote atual na l√≥gica de inscri√ß√£o.
  - Toda l√≥gica de neg√≥cio deve ser baseada em `status`, n√£o em `ativo`.

Portanto:
- Se existir qualquer l√≥gica hoje que use apenas `ativo = true` para considerar um lote "v√°lido":
  - essa l√≥gica deve ser refeita para considerar principalmente `status`.


2) Ao ativar um lote pelo admin
-------------------------------

Quando o admin clicar em "ativar" um lote no painel:

Regras obrigat√≥rias:

- Para o lote selecionado:
  - `status` deve ser alterado para `'active'`
  - `ativo` deve ser setado para `true` (j√° que ele ser√° usado na √°rea do cliente).

- Para os OUTROS lotes do mesmo evento que estiverem `status = 'active'`:
  - mudar para `status = 'closed'`
  - `ativo` pode permanecer como est√° (decis√£o visual/admin), mas n√£o podem continuar com status 'active'.

- Garantia:
  - Nunca pode existir mais de 1 lote com `status = 'active'` para o mesmo evento.

Obs.:
- Lotes com `status = 'future'` permanecem 'future', exceto se o admin escolher explicitamente ativ√°-los.


3) Comportamento no frontend (tela de edi√ß√£o/listagem de lotes)
----------------------------------------------------------------

Quero que o admin tenha clareza do que est√° acontecendo:

- Em cada lote, exibir:
  - `status` (future / active / closed)
  - `ativo` (vis√≠vel para o cliente: sim/n√£o)

A√ß√µes poss√≠veis:

a) Bot√£o ‚ÄúAtivar lote‚Äù
   - Seta:
     - `status = 'active'`
     - `ativo = true`
   - Marca todos os outros lotes `active` do evento como `status = 'closed'`.

b) Bot√£o ‚ÄúFechar lote‚Äù
   - Seta:
     - `status = 'closed'`
   - `ativo` pode ou n√£o ser alterado, mas isso √© puramente visual.

c) Bot√£o ‚ÄúMarcar como futuro‚Äù
   - Seta:
     - `status = 'future'`
   - Essa a√ß√£o deve ser condicionada √†s regras de neg√≥cio (ex.: se ainda fizer sentido reabrir esse lote como futuro).

d) Toggle de visibilidade (`ativo`):
   - Uma flag tipo:
     - ‚ÄúMostrar este lote na √°rea do atleta?‚Äù
   - Muda APENAS `ativo = true/false`
   - N√£o altera `status`
   - N√£o interfere na l√≥gica de inscri√ß√£o.
   - Assim, no futuro, ao listar lotes de um evento para o atleta:
     - s√≥ ser√£o retornados/exibidos lotes com `ativo = true`.


4) Queries de lotes para fluxo de inscri√ß√£o
-------------------------------------------

Revisar todas as queries/resolvers que buscam "lote ativo para inscri√ß√£o".

Requisitos:

- Para uso na inscri√ß√£o:
  - Buscar SEMPRE por `status = 'active'`.
  - `ativo` N√ÉO deve ser usado como condi√ß√£o obrigat√≥ria para a l√≥gica de neg√≥cio de inscri√ß√£o.
  - Exemplo:

  ```sql
  SELECT *
  FROM registration_batches
  WHERE event_id = :eventId
    AND status = 'active'
  LIMIT 1;
